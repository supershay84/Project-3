(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),c=n.n(s),a=n(9),u=n.n(a),o=(n(15),n(2)),i=n.n(o),l=n(3),p=n(4),j=(n(17),n(7)),b=function(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),c=Object(s.useRef)(null),a=Object(s.useRef)(null),u=function(){var r=Object(l.a)(i.a.mark((function r(s){var u,o,l,p,b,f,h;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s.preventDefault(),u=t.current.value,o=n.current.value,l=c.current.value,p=a.current.value,b=JSON.stringify({name:u,description:o,url:l,image:p}),s.currentTarget.reset(),console.log(b),r.prev=8,r.next=11,fetch("https://all-in-your-business.herokuapp.com/businesses",{method:"POST",headers:{"Content-type":"application/json"},body:b});case 11:return f=r.sent,r.next=14,f.json();case 14:h=r.sent,e.updateBusinesses([].concat(Object(j.a)(e.businesses),[h])),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(8),console.error(r.t0);case 21:case"end":return r.stop()}}),r,null,[[8,18]])})));return function(e){return r.apply(this,arguments)}}();return Object(r.jsxs)("form",{onSubmit:u,children:[Object(r.jsx)("input",{type:"text",ref:t,placeholder:"Business Name"}),Object(r.jsx)("input",{type:"text",ref:n,placeholder:"Business Description"}),Object(r.jsx)("input",{type:"text",ref:c,placeholder:"Business URL"}),Object(r.jsx)("input",{type:"text",ref:a,placeholder:"Add Image"}),Object(r.jsx)("input",{className:"submit",type:"submit",value:"Add Your Business"})]})},f=function(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),c=function(){var e=Object(l.a)(i.a.mark((function e(r){var s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),s=JSON.stringify({username:t.current.value,password:n.current.value}),r.currentTarget.reset(),e.prev=3,e.next=6,fetch("https://all-in-your-business.herokuapp.com/register",{method:"POST",headers:{"Content-type":"application/json"},body:s});case 6:return c=e.sent,e.next=9,c.json();case 9:e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{className:"registerForm",onSubmit:c,children:[Object(r.jsx)("input",{className:"registerName",type:"text",placeholder:"Create Username",ref:t}),Object(r.jsx)("input",{className:"registerPassword",type:"password",placeholder:"Create Password",ref:n}),Object(r.jsx)("input",{className:"registerSubmit",type:"submit",value:"Register"})]})},h=function(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),c=Object(s.useState)(""),a=Object(p.a)(c,2),u=(a[0],a[1]),o=function(){var e=Object(l.a)(i.a.mark((function e(r){var s,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),s=JSON.stringify({username:t.current.value,password:n.current.value}),console.log(s),r.currentTarget.reset(),e.prev=4,e.next=7,fetch("https://all-in-your-business.herokuapp.com/login",{method:"POST",headers:{"Content-type":"application/json"},body:s});case 7:return c=e.sent,e.next=10,c.json();case 10:a=e.sent,window.localStorage.setItem("token","Bearer ".concat(a.token)),u("Bearer ".concat(a.token)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{className:"loginForm",onSubmit:o,children:[Object(r.jsx)("input",{className:"loginPassword",type:"text",placeholder:"Username",ref:t}),Object(r.jsx)("input",{className:"loginPassword",type:"password",placeholder:"Password",ref:n}),Object(r.jsx)("input",{className:"loginSubmit",type:"submit",value:"Login"})]})},d=function(e){Object(s.useRef)(null),Object(s.useRef)(null);var t=Object(s.useState)(""),n=Object(p.a)(t,2),c=(n[0],n[1]),a=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=JSON.stringify({}),console.log(n),e.prev=3,e.next=6,fetch("https://all-in-your-business.herokuapp.com/logout",{method:"POST",headers:{"Content-type":"application/json"},body:n});case 6:return r=e.sent,e.next=9,r.json();case 9:s=e.sent,window.localStorage.setItem("token","Bearer ".concat(s.token)),c(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("input",{onSubmit:a,className:"logout",type:"submit",value:"Logout"})};var m=function(){var e=Object(s.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),u=Object(p.a)(a,2),o=u[0],j=u[1],m=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://all-in-your-business.herokuapp.com/businesses");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://all-in-your-business.herokuapp.com/businesses/".concat(t),{method:"DELETE",headers:{"Content-type":"application/json",Authorization:o}});case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,a=n.filter((function(e){return e._id!==s._id})),c(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){m(),window.localStorage.getItem("token")&&j(window.localStorage.getItem("token"))}),[]),Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("header",{className:"App-header",children:[Object(r.jsxs)("nav",{children:[Object(r.jsx)(f,{}),Object(r.jsx)(h,{}),Object(r.jsx)(d,{})]}),Object(r.jsx)(b,{updateBusinesses:c,businesses:n}),Object(r.jsx)("h1",{children:"All in your business"}),Object(r.jsx)("p",{children:"Find your new favorite small businesses!"}),Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsxs)("li",{className:"businessName",children:[e.name,Object(r.jsx)("br",{}),Object(r.jsx)("li",{className:"businessDescription",children:e.description}),Object(r.jsx)("br",{}),Object(r.jsx)("img",{src:e.image,className:"businessImage"}),Object(r.jsx)("br",{}),Object(r.jsx)("a",{className:"url",href:e.url,children:"Check me out!"}),Object(r.jsx)("br",{}),Object(r.jsxs)("button",{onClick:function(t){O(e._id)},children:[" DELETE ",e.name]})]},e._id)}))})]})})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root")),O()}},[[18,1,2]]]);
//# sourceMappingURL=main.939bbc13.chunk.js.map